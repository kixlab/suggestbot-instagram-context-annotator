{% extends "annotate_base.html" %}
{% load fontawesome %}
{% load staticfiles %}
{% fontawesome_stylesheet %}

{% block scripts %}
<script src="{% static 'js/upload.js' %}" type="text/javascript"> </script>
<script src="{% static 'js/jquery-file-upload/vendor/jquery.ui.widget.js' %}"></script>
<script src="{% static 'js/jquery-file-upload/jquery.iframe-transport.js' %}"></script>
<script src="{% static 'js/jquery-file-upload/jquery.fileupload.js' %}"></script>

<link href="{% static "css/annotator.css" %}" rel="stylesheet"> 
{% endblock %}

{% block content %}
<div class='row'>
  <div class='col-1'></div>
  <div class='col-10'>
    <div class="well text-muted text-center" style="padding-top: 4rem; padding-bottom: 4rem;">
      <span class="glyphicon glyphicon-arrow-down" style="font-size: 4rem;"></span>
      <h3>Drop Photos Here to Upload</h3>
    </div>

    <div class="well text-muted text-center" style="padding-top: 4rem; padding-bottom: 4rem;">
      You can use your mobile phone to upload pictures. <br>
      Please go to <span id="uri" style="font-weight: bold; text-decoration: underline;">{{request.build_absolute_uri}}</span> in your mobile phone to upload the photos. <br>
      When you're done uploading the photos, please refresh this page and continue.
    </div>

    <button type="button" class="btn btn-primary js-upload-photos">
        <span class="glyphicon glyphicon-cloud-upload"></span> Upload photos
      </button>
      
      {# 2. FILE INPUT TO BE USED BY THE PLUG-IN #}
      <input id="fileupload" type="file" name="file" multiple
             style="display: none;"
             data-url='../upload/'
             data-form-data='{"csrfmiddlewaretoken": "{{ csrf_token }}"}'>
      
      {# 3. TABLE TO DISPLAY THE UPLOADED PHOTOS #}
      <table id="gallery" class="table table-bordered">
        <thead>
          <tr>
            <th>#</th>
            <th>Photo</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>    
      <div class="row">
        <div class='col-sm-11'></div>
        <div class='col-sm-1'>
            <input type="submit" class="btn btn-info" value="Next" onclick='finish_upload()' />
        </div>
</div>
</div>

<div class="modal fade" id="modal-progress" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Uploading...</h4>
        </div>
        <div class="modal-body">
          <div class="progress">
            <div class="progress-bar" role="progressbar" style="width: 0%;">0%</div>
          </div>
        </div>
      </div>
    </div>
  </div>
<div class='col-1'></div>
</div>


{% endblock %}